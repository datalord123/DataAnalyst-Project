
Analysis of 2016 NC Presidential Campaign Contributions by Matthew Bellissimo
---
output: html_document
references: http://www.realclearpolitics.com/epolls/2016/president/us/2016_republican_presidential_nomination-3823.html,http://www.realclearpolitics.com/epolls/2016/president/us/2016_democratic_presidential_nomination-3824.html

---

```{r echo=FALSE, message=FALSE, warning=FALSE,packages}
#Load the Packages
library(ggplot2)
library(gridExtra)
library(dplyr)
library(tidyr)
theme_set(theme_minimal(20))
```

I wanted to Analyze the 2016 NC Presidential Campaign Contributions

```{r echo=FALSE, message=FALSE, warning=FALSE, Load_the_Data}
#Load the Data
Contributions<-read.csv('NC-Contributions.csv',header=TRUE)
```


# Univariate Plots Section
```{r echo=FALSE, message=FALSE, warning=FALSE, Univariate_Plots}
# Summarize the data set
names(Contributions)
str(Contributions)
```
Candidate Names
```{r echo=FALSE, message=FALSE, warning=FALSE}
#Show Cand Names
levels(Contributions$cand_nm)
```

Count of Unique Contributors 
```{r echo=FALSE, message=FALSE, warning=FALSE}
#Show Number of Candidates
length(levels(Contributions$contbr_nm))
```

Count of Unique Occupations
```{r echo=FALSE, message=FALSE, warning=FALSE}
#Shot Number of Occupation types
length(levels(Contributions$contbr_occupation))
```
Top 10, Cities and Contributor Occupations
```{r echo=FALSE, message=FALSE, warning=FALSE}
head(summary(Contributions$contbr_city),10)
head(summary(Contributions$contbr_occupation),10)
```
Summary of Receipt Amount
```{r echo=FALSE, message=FALSE, warning=FALSE}
summary(Contributions$contb_receipt_amt)
```
Rceipt Desciptions
```{r echo=FALSE, message=FALSE, warning=FALSE}
#Study Contribution Desctiptions
levels(Contributions$receipt_desc)
```
I noticed was that Ted Cruz was being counted twice.
I used tidyr to fix this.
```{r echo=FALSE, message=FALSE, warning=FALSE}
#Spread the Dataset
SpContributions<-
  spread(Contributions,cand_nm,contb_receipt_amt)
SpContributions$"Cruz, Rafael Edward 'Ted'"[
  is.na(SpContributions$"Cruz, Rafael Edward 'Ted'")]<-0
SpContributions$"CRUZ, RAFAEL EDWARD TED"[
  is.na(SpContributions$"CRUZ, RAFAEL EDWARD TED")]<-0
SpContributions$"Cruz, Rafael Edward 'Ted'"<-
  SpContributions$"Cruz, Rafael Edward 'Ted'"+
  SpContributions$"CRUZ, RAFAEL EDWARD TED"
SpContributions$"CRUZ, RAFAEL EDWARD TED"<-NULL
#Gather the Dataset
GathContributions<-
  gather(SpContributions,'cand_nm','contb_receipt_amt',17:30)
Contributions<-
  subset(GathContributions,!is.na(contb_receipt_amt)&contb_receipt_amt !=0)
```
I also created an entirely new I also added another column called 'Day' 
with the date represented as numeric value.
```{r echo=FALSE, message=FALSE, warning=FALSE}
#Create the Days variable
Contributions$Days<-
  as.numeric(as.Date(
    strptime(Contributions$contb_receipt_dt,'%d-%b-%y'))-
      min(as.Date(strptime(Contributions$contb_receipt_dt,'%d-%b-%y'))))
str(Contributions)
```

When I looked at a summary of Contribution amounts, i noticed that a number of 
values were negative. Looking at the reciept desciptions showed that 
these values actually represented refunds. 

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Exclude all Contributions where contribution amount is greator than 0
ContributionsNR<-subset(Contributions,contb_receipt_amt>0)
#Show a summary of this updated dataset
summary(ContributionsNR$contb_receipt_amt)
```

Excluding refunds from the dataset didn't show a significant change in
the summary values, so i left them in.

I decided to make two summary tables so that i could go over the data at a 
higher level. One was for candidate information,
the other for donor information.
```{r echo=FALSE, message=FALSE, warning=FALSE}
#Summary Tables
Contributions.Summary.Can<-Contributions %>% group_by(cand_nm) %>%
  summarise(FreqOfContributions = n(),
            BiggestRefund = min(contb_receipt_amt),
            MeanContributions=mean(contb_receipt_amt),
            MedianContributions=median(contb_receipt_amt),
            MaxContributions=max(contb_receipt_amt),
            TotalContributions=sum(contb_receipt_amt))%>%
  arrange(-FreqOfContributions)

Contributions.Summary.Con<-Contributions %>% group_by(contbr_nm) %>%
  summarise(TotalContributions=sum(contb_receipt_amt),
            FreqOfContributions = n(),
            MeanContributions=mean(contb_receipt_amt),
            MedianContributions=median(contb_receipt_amt),
            MaxContributions=max(contb_receipt_amt))%>%
  arrange(-TotalContributions)

dim(subset(Contributions.Summary.Con,FreqOfContributions==1))
dim(subset(Contributions.Summary.Con,FreqOfContributions>1))
```

There are 14 Candidates and 1036 Unique Contributors
436 contributors contributed more than once.
The maximum contribution was $10800. 
The largest refund was $-5400.
The smallest contribution was $2
The interquartile range of Contributions was between $40 and $250
The median contribution was 100
The mean contribution was 375.9. 
Contributor occupation varied widely,though the largest group 
was composed of Retirees. 

The largest number of contributions went to Ben Carson(594)
on the Republican side, followed by Ted Cruz(425), 
and then Democratic Candidate Hillary Clinton(414). 
Rick Perry came in last with only one contribution. 
The largest contribution (10800) went to Ben Carson.
Jeb Bush had the highest Mean and Median contribution,
2034 and 2700 respectively.

To begin, i plotted a basic histogram 

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Basic Histogram
ggplot(aes(x=contb_receipt_amt), data = Contributions)+
  geom_histogram()+
  xlab('Contribution Amount[$]')+
  ylab('Frequency')+
  ggtitle('Campaign Contribution Histogram')
```

I could see that most contributions were clustered slightly above 0, and
included small numbers of larger positive and negative contributions.
Unfortunately, it was difficult to infer any more information beyond this,
so I decided to play around with the binwidth,
and add some more detail to x axis.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Histogram with adjusted bin widths
ggplot(aes(x=contb_receipt_amt), data = Contributions)+
  geom_histogram(binwidth=10)+
  scale_x_continuous(breaks=seq(-6000,11000,1000))+
  xlab('Contribution Amount[$]')+
  ylab('Frequency')+
  ggtitle('Campaign Contribution Histogram')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))
```

The new plot showed that most contributions were clustered between 0 and 1000,
with a spike of contributions occuring right below 3000, and a small number of
much larger contributions above that. It also appeared that most refunds
occured around this 3000 dollar level. Still, it was difficult to see the
outliers, as there were very few of them. I didn't want to ignore these values,
however, because despite there not being a lot of them, i knew that large
contributions are very important in political elections.
To remedy this situation, I decided to perform a log10 transformation
on the x axis. 

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Scale x axis with log10
ggplot(aes(x=contb_receipt_amt), data = Contributions)+
  geom_histogram(binwidth=.01)+
  scale_x_log10(breaks=c(2,5,10,25,50,100,250,500,1000,2750,5500,10000))+
  xlab('Contribution Amount[$]')+
  ylab('Frequency')+
  ggtitle('Log10 Transformed Campaign Contribution Histogram')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))
```

This showed the clearest picture yet for how contributions occured. 
In addition to being
normally distributed, i could now see, in a much higher level of detail,
the scale and frequency of different contributions.
The only downside here was that the log transformation turned
all of the negative data values,0, which meant that I lost all of
the information on refunds.

I also noticed that there were major gaps in between the contribution values
I thought this was a really interesting trend.

Contribution values mostly seemed to be in whole, even, values,
and were almost all a factor 25.
I believe this is an example of the psychological trend of mental anchoring,
as contributors are tending to contribute in familiar numbers
(ex: 1000 is a more common contribution than 980).
In any case, the result was that contributions looked like they mostly occured
in discrete increments. 

Because of this phenomenon, and the because I really did want to include 
refunds in my plot, I decided it would probably make sense to use of 
R's cut function.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Cut x axis variables into buckets
Contributions$contb_receipt_amt.Bucket<-
  cut(Contributions$contb_receipt_amt,
      c(-6000,-3000,0,5,10,25,50,100,250,500,1000,2750,5500,11000),dig.lab=10)

summary(Contributions$contb_receipt_amt.Bucket)
#Show finished frequency distribution plot
ggplot(aes(x=contb_receipt_amt.Bucket),data=Contributions)+
  geom_histogram()+
  xlab('Contributions')+
  ylab('Frequency')+
  ggtitle('Campaign Contribution Histogram')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))
```

I figured it would also make sense to create a plot to show how the 
Candidates ranked in terms of number of contributions recieved.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Contribution Histogram 
  ggplot(aes(x=reorder(cand_nm,-FreqOfContributions),y=FreqOfContributions),
         data=Contributions.Summary.Can)+
  geom_bar(stat='identity')+
  xlab('Candidates')+
  ylab('Frequency')+
  ggtitle('Contribution Frequency Histogram')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))
```

We can see that only 3 of the 14 candidates(Ben Carson,Ted Cruz, 
and Hillary Clinton) broke 400 contributions since the start of their campaign.

I also thought it would be interesting to see how contbr_employer and
"contbr_occupation", are distributed between different candidates.

In the process of doing this, I decided that it would make sense to start
excluding outlier candidates. I was more or less subjective when picking which
candidates should be excluded. However i used real clear politics as a point
of reference to see which candidates where relevant or not.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Exclude Outliers
ContributionsNO<-Contributions[Contributions$names]
Exclude<-c('Santorum, Richard J.',"O'Malley, Martin Joseph","Perry, James R. (Rick)",'Jindal, Bobby','Graham, Lindsey O.','Fiorina, Carly','Huckabee, Mike')
ContributionsNO <- subset(Contributions,!(cand_nm %in% Exclude))
ContributionsNO <- droplevels(ContributionsNO)  

#Contributor Occupation Summary Table
Contributions.Summary.Occ<-ContributionsNO %>%
  group_by(contbr_occupation,cand_nm) %>%
  summarise(FreqOfContributions = n())%>%
  mutate(Total=sum(FreqOfContributions))%>%
  ungroup()%>%
  arrange(-Total,-FreqOfContributions)

#Contributor Employer Summary Table
Contributions.Summary.Emp<-ContributionsNO %>%
  group_by(contbr_employer,cand_nm) %>%
  summarise(FreqOfContributions = n())%>%
  mutate(Total=sum(FreqOfContributions))%>%
  ungroup()%>%
  arrange(-Total,-FreqOfContributions)

  #Plot Occupation Breakdown
  ggplot(aes(reorder(x=contbr_occupation,-Total),y=FreqOfContributions),
         data=Contributions.Summary.Occ[1:60,])+
  geom_bar(stat='identity')+
  xlab('Contributor Occupation')+
  ylab('Frequency')+
  ggtitle('Contributor Occupation Histogram')+
  theme(axis.text.x=element_text(angle=20,size=6,vjust=0.99,hjust=.99),
        title=element_text(size=15))
  
  #Plot Employer Breakdown
  ggplot(aes(reorder(x=contbr_employer,-Total),y=FreqOfContributions),
         data=Contributions.Summary.Emp[1:60,])+
  geom_bar(stat='identity')+
  xlab('Contributor Employer')+
  ylab('Frequency')+
  ggtitle('Contributor Employer Histogram')+
  theme(axis.text.x=element_text(angle=20,size=6,vjust=0.99,hjust=.99),
        title=element_text(size=15))  
```

We can se that Retiree's make up, by far, the largest number of Contributors.
The remaining contributors are spread pretty thinly across the remaining 
employers, and occupation, with unemployed, blank entries, and homemakers,
a large portion of the remaining Occupations, and no single employer having 
a significant impact contributions.

# Univariate Analysis
### What is the structure of your dataset?
In this dataset there were 2319 contributions, made to 14 different candidates,
by 1036 unique contributors. 436 contributors gave money more than once.
The largest amount contributed in this dataset was $10800
and was given to Ben Carson. The biggest refund was for $5400 
and refunded by Ted Cruz. The smallest value contributed was for $2,
and the interquartile range of donations excluding refunds was
between $50 and $397. 
Again, excluding refunds, the median contribution was $100 and the 
mean contribution was $376. The occuption of contributors seeemed to vary 
widely, as 322 unique values were listed.
Republican Ben Carson recieved the largest number of contributions(594),
followed by other Republican Ted Cruz(425), and then democratic candidate
Hillary Clinton(414).Rick Perry came in last with only one contribution made
to his campaign. Republican Jeb Bush had the highest Mean and Median
contributions, 2034 and 2700 respectively. 

There were 18 original features in the dataset.These were:

[cmte_id,cand_id,cand_nm,contbr_nm,contbr_city,contbr_st,
contbr_zip,contbr_employer,contbr_occupation,
contb_receipt_amt,contrb_receibt_dt,receipt_desc,memo_cd,
memo_text,form_tp,file_num,tran_id,form_tp,file_num,tran_id,election_tp]

### What is/are the main feature(s) of interest in your dataset?
The main features of interest in my dataset are cand_nm,contb_receipt_amt.
Most of the things i am interested in investigating are related to the 
success of the candidate. The frequency and scale of contributions,
i believe, plays a large role in this.

### What other features in the dataset do you think will help support your investigation into your feature(s) of interest?
Other features that might make sense to look at are contbr_nm, contbr_city, and contb_receipt_dt. It would be interesting to see if something like
the 80-20 rule applies here, with 80% of contributions being given by 20% of contributors. I believe it would also be helpful to see the 
locations where different contributions were coming from, maybe to
see if certain areas were more valuable in terms of campaigning.
Finnally it would make sense to look at when different donations occured,
to see if certain candidates have been trending up or down as their
campaign has progressed.

### Did you create any new variables from existing variables in the dataset?
I created a variable called contb_receipt_amt.Bucket, from contb_receipt_amt
using R's cut function. The purpose of this was to get around the fact that
most donations were occuring in seemingly discreete increments.
I also added another column called 'Day' with the date represented as
numeric value(I subtracted the minimum date from all dates in the vector.
I did this so that i would be easier to plot with this information later on.

### Of the features you investigated, were there any unusual distributions?
### Did you perform any operations on the data to tidy, adjust,
### or change the form of the data? If so, why did you do this?

When the data was first loaded.Ted Cruz had to cand_nm levels devoted to him,
which was a mistake. To fix this i used tidyr's spread function,
to make those variables columns, then i added values of the vector
of the extra one to the values of the vector of the first one.
I then gathered the updated columns and deleted the extra one.

# Bivariate Plots Section
I decided to visualize some of the summary table information
The first question i wanted to answer was "Who recieved the most money?"

```{r echo=FALSE, message=FALSE, warning=FALSE, Bivariate_Plots}
  #Show total Contributions by Candidate
  ggplot(aes(x=reorder(cand_nm,-TotalContributions),y=TotalContributions),
       data=Contributions.Summary.Can)+
  geom_bar(stat ='identity')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))+
  xlab('Candidates')+
  ylab('Total Contributions[$]')+
  ggtitle('Total Contributions by Candidate')
```

It turns out that while Ben Carson was still in the lead for Republians, 
Hillary Clinton was actually the candidate who raised the most money so far.

Let's see how candidates ranked up in terms of Mean Donations.

```{r echo=FALSE, message=FALSE, warning=FALSE}
    #Show Mean Contributions by Candidate
ggplot(aes(x=reorder(cand_nm,-MeanContributions),y=MeanContributions),
       data=Contributions.Summary.Can)+
  geom_bar(stat ='identity')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))+
  xlab('Candidates')+
  ylab('Mean Contributions[$]')+
  ggtitle('Mean Contributions by Candidate')
```

Looks like a close contest between Jeb Bush, Mike Huckabee,Lindsey Graham,
and Martin O Mall. That's really strange. O' Mally's been polling at close to 0 
since the start of the race. I wonder what the plot would look like
if we used Median Contributions instead.

```{r echo=FALSE, message=FALSE, warning=FALSE}
  #Show Median Contributions by Candidate
ggplot(aes(x=reorder(cand_nm,-MedianContributions),y=MedianContributions),
       data=Contributions.Summary.Can)+
  geom_bar(stat ='identity')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))+
  xlab('Candidates')+
  ylab('Median Contributions[$]')+
  ggtitle('Median Contributions by Candidate')
```

Looks like the same 4 Candidates as before, except now Jeb Bush is blowing
everybody out of the water.Also interesting, is the Ben Carson, who led 
the pack in terms of the number of donations and maximum donations, is actually
now closer to the tail of the plot.

Let see how maximum donations played into the mix.

```{r echo=FALSE, message=FALSE, warning=FALSE}
    #Show Maximum Contributions by Candidate

ggplot(aes(x=reorder(cand_nm,-MaxContributions),y=MaxContributions),
       data=Contributions.Summary.Can)+
  geom_bar(stat ='identity')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
        title=element_text(size=15))+
  xlab('Candidates')+
  ylab('Maximum Contributions[$]')+
  ggtitle('Maximum Contributions by Candidate')
```

Ok that's reallly intesting. Except for Mike Huckabee,the top 4 leaders
in mean and median aren't the leaders in the largest donations. 
Ben Carson actually leads here, which is weird since he was ranked
in the middle for Mean Donations, and large donations should have
skewed that value upwards with him.
Maybe it was just a fluke. In any case there was only one way to be sure.
Time for a boxplot.  

```{r echo=FALSE, message=FALSE, warning=FALSE}
  #Show boxplot of Contribution ranges for each candidate
ggplot(aes(x=reorder(cand_nm,-contb_receipt_amt),y=contb_receipt_amt),
       data=Contributions)+
  geom_boxplot()+
  scale_y_continuous(breaks=seq(-5000,12500,2500))+
  theme(axis.text.x=element_text(angle = 20,size=8,vjust = .9,hjust =.9))+
  xlab('Candidates')+
  ylab('Contribution Amount[$]')+
  ggtitle('Contribution Analysis by Candidate')
```

So now this makes more sense.
It looks like most of Jeb Bush's donations were above the $2500 mark,
while ben carsons donations were all much smaller. 
Ben did get the largest donation,and he does have a few outliers,
but it looks the like great majority of,his support has been from 
small donations.Martin O Mally, we can also now see that he hasn't had a lot of donations, and the one's he's had were mostly small scale. However, because the frequency of donation for him is so low, the larger donations he did get
probably skewed his mean upwards just because that number is so variable.

Let's quickly look where, in terms of location, this money is coming from.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Summarize Contributions by City
Contributions.by_City<-ContributionsNO %>% group_by(contbr_city)%>%
  summarise(LocSum=sum(contb_receipt_amt)) %>%
  arrange(-LocSum)

#Show Total Contributions by City
ggplot(aes(x=reorder(contbr_city,-LocSum),y=LocSum),
       data=Contributions.by_City[1:15,])+
  geom_bar(stat='identity')+
  theme(axis.text.x=element_text(angle=20,size=8,vjust=0.9,hjust=.9),
  title=element_text(size=15),
  legend.position='none')+
  xlab('City')+
  ylab('Total Contributions[$]')+
  ggtitle('Total Contributions by City')
```

Looks like most of the money is coming from Charlotte and Raleigh.

We talked about the 80-20 rule, lets make another plot to see if
thats actually playing out here.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Show Contributions by Contributor
ggplot(aes(x=reorder(contbr_nm,-TotalContributions),y=TotalContributions),
       data=Contributions.Summary.Con[1:30,])+
  geom_bar(stat='identity')+
  scale_y_continuous(breaks=seq(0,30000,5000))+
  theme(axis.text.x=element_text(angle=30,size=5,vjust=1,hjust=1),
  title=element_text(size=15),
  legend.position='none')+
  geom_text(aes(label=FreqOfContributions),color = 'blue',size=4,vjust=-.2)+
  xlab('Contributor')+
  ylab('Total Contributions [$]')+
  ggtitle('Total Contributions by Contributor')
```

Wow, so whoever, Mr Harrison J Frank III is i'd like to meet him since, i guess,
he had the disposable income to more than double the contribution 
of the next biggest contributor. In terms of the 80:20 rule, the top 20% of contributors(Top 207), made up around 67.4% of total contributions,
while the top 3% of contributors(30) made up just over 20% of
total contributions.

So this is a BIG skew.

Sum of Total Contributions

```{r echo=FALSE, message=FALSE, warning=FALSE}
sum(Contributions.Summary.Con$TotalContributions)
```

Sum of Top 20%(207) Contributors

```{r echo=FALSE, message=FALSE, warning=FALSE}
sum(Contributions.Summary.Con$TotalContributions[1:207])
```

Percentage of Total Contributions made up the top 20% of Contributors

```{r echo=FALSE, message=FALSE, warning=FALSE}
sum(Contributions.Summary.Con$TotalContributions[1:207])/
  sum(Contributions.Summary.Con$TotalContributions)
```

Sum of Top 30 Contributors

```{r echo=FALSE, message=FALSE, warning=FALSE}
sum(Contributions.Summary.Con$TotalContributions[1:30])
```

Percentage of Total Contributions made up the top 3%(30) of Contributors

```{r echo=FALSE, message=FALSE, warning=FALSE}
sum(Contributions.Summary.Con$TotalContributions[1:30])/
  sum(Contributions.Summary.Con$TotalContributions)
```

The last thing i really wanted to look at in this section was to see how
the frequency of contributions compared to Total Contributions

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Contribtions amount by Frequency
ggplot(aes(x=round(FreqOfContributions),y=TotalContributions),
       data=Contributions.Summary.Con)+
  geom_point(alpha=1/10)+
  scale_y_log10()+
  scale_x_discrete(breaks=c(0,1,2,3,4,5,6,7,8,9,10))+
  coord_cartesian(xlim = c(0,quantile(Contributions.Summary.Con$FreqOfContributions,.99)))+
  xlab('Contribution Frequency')+
  ylab('Contribution Amount [$]')+
  ggtitle('Contribution Amount by Frequency')
```

I could see that the highest concentration of donors were one offs,
and that the range of their donations varied widely.

I decided that rather attempt a subjective intpretation,
it might make sense to just perform a linear regression.

```{r echo=FALSE, message=FALSE, warning=FALSE,Linear_Regression}
#Create Linear model to show if there is a relationship between Contribution
# Frequency and Contribution Amount
newlog<- function(x) ifelse(x <= 0, 0, base::log(x))
model<-lm(newlog(TotalContributions)~FreqOfContributions,
          data=Contributions.Summary.Con)
summary(model)
```

The Coefficient for FreqOfContributions was very close to zero, and the p
value was very high. This meant that we could not reject the null hypothesis
that the coefficient on FrequencyOfContributions should actually be zero,
which meant it didn't appear that there was a relationship between
these two values.

Now I wanted to circle back to looking at Contributor Occupation and
Contributor Employer.  This time,however, i decided to add the extra
dimension of breaking these down by Candidate. 

```{r echo=FALSE, message=FALSE, warning=FALSE}
  # Contributor Occupation by Candidate
  ggplot(aes(reorder(x=contbr_occupation,-Total),y=FreqOfContributions,
             fill=cand_nm),data=Contributions.Summary.Occ[1:60,])+
  geom_bar(color='black',stat='identity')+
  xlab('Contributor Occupation')+
  ylab('Frequency')+
  ggtitle('Contributor Occupation Histogram')+
  theme(axis.text.x=element_text(angle=20,size=6,vjust=0.99,hjust=.99),
        title=element_text(size=15))
  #Contributor Employer by Candidate
  ggplot(aes(reorder(x=contbr_employer,-Total),
             y=FreqOfContributions,fill=cand_nm),
         data=Contributions.Summary.Emp[1:60,])+
  geom_bar(stat='identity',color='black')+
  xlab('Contributor Employer')+
  ylab('Frequency')+
  ggtitle('Contributor Employer Histogram')+
  theme(axis.text.x=element_text(angle=20,size=6,vjust=0.99,hjust=.99),
        title=element_text(size=15))  
```

So adding candidate name as a dimension doesn't add a huge amount of helpful
data. One thing we can see now, however, is that Ben carson is getting a huge
number of contributions from Retireees. This is interesting given that
Ben Carson previously received notice due to the fact that most of his 
contributions were given in small amounts. Retiree's have limited income, 
so it makes sense that if they were to contribute, they would be giving out
small sums.

# Bivariate Analysis
### Talk about some of the relationships you observed in this part of the 
### investigation. How did the feature(s) of interest vary with other features
### in the dataset?
The strongest relationships i saw were betweeen mean donation and
median donation. Jeb was in the lead on both, despite not having the most
donations, or the largest donations. 

It looks like at this point in the campaign season it may be too early
for money to matter. Another alternative is that most of the contributions
that matter are not listed in the Federal Election Commitee data, 
as it has instead gone to super pacs. I can say that after playing around 
with mean, median,max, frequency, and total sum of donations that the same
4 candidates kept popping up in different orders.
These were Hillary Clinton, Ben Carson, Ted Cruz, and Jeb Bush. 
3 of these four ranked highly in terms of the frequency of donations,
Jeb Bush was the only one who didn't score highly there.
This was probably mitigated by the average size of his donations,
as they were on average much stronger than his peers.
Perhaps the strongest argument that could be said is that are only around 4 or 5 credible candidates that are listed in the dataset, 
and that everybody below this threshold for the most part performs poorly.

### Did you observe any interesting relationships between the other features 
### (not the main feature(s) of interest)?
I saw that the most money came out of Charlotte. 

I also saw that a dispraportionate amount of money came from a small
number of super contributors. It blew my mind that 3% of donors made up
20% of total contributions.  

### What was the strongest relationship you found?
The relationship between median and mean donations.
Jeb bush was solidly in the lead with both.


# Multivariate Plots Section

```{r echo=FALSE, message=FALSE, warning=FALSE, Multivariate_Plots}
#Raw(NOT FINAL) version of Contributions over time.
ggplot(aes(x=Days,y=contb_receipt_amt),data=ContributionsNO)+
  geom_point(aes(color=cand_nm))+
  xlab('Day')+
  ylab('Contribution Amount [$]')+
  ggtitle('Contributions over time')+
  theme(legend.text=element_text(size=7),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=20, size=8, vjust=0.7))
levels(Contributions$cand_nm)
```

I wanted look at how contributions rose or fell for candidates over time.
Immediately ,however,i noticed a problem. There are 15 candidates.
This is a large number for a legend, and is compounded by the fact
that the colors are effectively uninterpretable. 

To mitigate this issue I decided to go back to using the Contributor dataset
that excluded outliers. I also changed the y axis to log10 and used CumSum 
to calculate the y value as the amount collected to date, instead of trying to
track all the hundreds of individual contributions.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Change Y Axis to log10 and add alpha of .5
ContributionsNO<-ContributionsNO %>% group_by(cand_nm)%>%
  arrange(Days) %>%
  mutate(TotalRaised=cumsum(contb_receipt_amt))
#Plot Cumulative raise for each candidate over time
ggplot(aes(x=Days,y=TotalRaised),data=ContributionsNO)+
  geom_line(aes(color=cand_nm))+
  scale_x_continuous(breaks=seq(0,300,30))+
  scale_y_log10()+
  scale_colour_brewer(palette="Set1")+
  xlab('Day')+
  ylab('Contribution Amount [$]')+
  ggtitle('Contributions Over Time')+
  theme(legend.text=element_text(size=15),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=20, size=10, vjust=0.7))+
  guides(colour = guide_legend(override.aes = list(alpha = 1)))
```
So this is great. We can see that Rand Paul started off with a Huge head start,
raising funds WAY ahead of everybody else. However, once other candidates,
began to enter the race, his trajectory faded out into the middle of the pack.
Ben Carson spiked to the lead immediately after he entered the race, but then
was overtaken by Hillary equally as quickly as soon as she entered. Bush,
despite entering last, has the steepest trajectory, and is a very close third.
According to this plot, he is on track to pass both Carson and Hillary and take
the lead, given only a little bit more time.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Create new variable,Month out of Days column
ContributionsNO$Months<-floor(ContributionsNO$Days/30)

#Show Mean Contribution per Month 
ggplot(aes(x=Months,y=contb_receipt_amt),data=ContributionsNO)+
  geom_line(aes(color=cand_nm),stat='summary',fun.y='mean')+
  scale_x_continuous(limits=c(0,10),breaks=seq(0,10,1))+
  scale_y_log10()+
  scale_colour_brewer(palette="Set1")+
  xlab('Day')+
  ylab('Contribution Amount [$]')+
  ggtitle('Mean Contributions Per Month')+
  theme(legend.text=element_text(size=15),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=20, size=10, vjust=0.7))+
    guides(colour = guide_legend(override.aes = list(alpha = 1)))

ggplot(aes(x=Months,y=contb_receipt_amt),data=ContributionsNO)+
  geom_line(aes(color=cand_nm),stat='summary',fun.y='median')+
  scale_x_continuous(limits=c(0,10),breaks=seq(0,10,1))+
  scale_y_log10()+
  scale_colour_brewer(palette="Set1")+
  xlab('Day')+
  ylab('Contribution Amount[$]')+
  ggtitle('Median Contributions Per Month')+
  theme(legend.text=element_text(size=15),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=20, size=10, vjust=0.7))+
    guides(colour = guide_legend(override.aes = list(alpha = 1)))
```

Again we can see Jeb Bush in the lead for Mean and Median. It's also
interesting to see that the average size of the contribution amounts for Rand
Paul, dropped significantly almost immediately after Ted Cruz entered the race.
```{r echo=FALSE, message=FALSE, warning=FALSE}
Contributions.by_CityCand<-ContributionsNO %>% 
  group_by(contbr_city,cand_nm)%>%
  summarise(CandSum=sum(contb_receipt_amt)) %>%
  mutate(LocSum=sum(CandSum))%>%
  ungroup() %>%
  arrange(-LocSum)
options(scipen=999)

#Show Contribution Amount By City by Candidate, using barplot in dodge position
ggplot(aes(x=reorder(contbr_city,-LocSum),y=CandSum,fill=cand_nm),
       data=Contributions.by_CityCand[1:75,])+
  geom_bar(stat='identity',color="black",position = "dodge")+
  theme(axis.text.x=element_text(angle=30,size=8,vjust=0.9,hjust=.9),
  title=element_text(size=15))+
  scale_y_continuous(breaks=c(0,25000,50000,75000,100000,125000))+
  xlab('City')+
  ylab('Total Contribution Amt[$]')+
  ggtitle('Total Contributions by City by Cand')
```

Interesting. It seem that in the largest donation cities, 
the most money is going to Hillary Clinton and Ben Carson respectively,
with Jeb Bush coming in third.

# Multivariate Analysis

### Talk about some of the relationships you observed in this part of
### the investigation. Were there features that strengthened each other in
### terms of looking at your feature(s) of interest?

Jeb Bush again won hands down when we started to look at mean and median
contributions over time. We also saw that part of the reason for this was
because he almost always recieves mid level donations. 
Another interesting point was that the same three candidates that recieved 
the most Total Contributions come up in the same rankings when looking at
contributions by location.
Again it was Hillary Clinton in 1st place, Ben Carson in 2nd,
and Jeb Bush in 3rd.

I do not feel comfortable, based on this data, that i will be able to build
an effective linear model for Campaign Donations.
There are just too many outside variable to take into consideration
(Median, Population, Debates). Other than Location of Contributors,
i think that the issues driving the success in donations for these different
candidates, are factors that aren't represented in this dataset.

### Were there any interesting or surprising interactions between features?

I was suprised that Jeb Bush Started receiving money so much later
than the other candidates, and Rand Paul so early.
It was also interesting to see that the mean donations for Rand Paul
were initailly much higher before other candidates started receiving funds.
There was a significant drop off following this occurence.
Finally it was interesting to see how much Location plays a role in fundraising.
It does not seem like it would be a coincidence that the same three
candidates leading in Total Contributions, are the same three candidates
leading in terms of amounts contributed by the big money
giving cities(and in the same order as well!). 

# Final Plots and Summary

### Plot One
```{r echo=FALSE, message=FALSE, warning=FALSE, Plot_One}
#Total and Median Contributions
ggplot(aes(x=Months,y=contb_receipt_amt),data=ContributionsNO)+
  geom_line(aes(x=Months,y=TotalRaised,color = cand_nm))+
  geom_jitter(aes(x=Months,y=contb_receipt_amt,color=cand_nm)
              ,stat='summary',fun.y='median')+
  scale_x_continuous(limits=c(0,10),breaks=seq(0,10,1))+
  scale_y_log10(breaks=c(10,25,100,300,1000,3000,10000,30000,75000,200000))+
  scale_colour_brewer(palette="Set1")+
  xlab('Day')+
  ylab('Contribution Amount[$]')+
  ggtitle('Total Contributions Over Median Contributions')+
  theme(title=element_text(size=15),
        legend.text=element_text(size=15),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=20, size=10, vjust=0.7))+
    guides(colour = guide_legend(override.aes = list(alpha = 1)))
```

### Description One
Jeb Bush started raising funds last, but was able to jump to third place in
terms of total funds raised. Clinton has been in the lead since she started
raising cash,which is startling given that her median contribution amount
is so small. Also Paul Rand, despite getting contributions 6 months before
anybody else, has fallen to the middle of the pack, both in terms of his Total 
Contributions, and his Median Contributions.

### Plot Two
```{r echo=FALSE, message=FALSE, warning=FALSE, Plot_Two}
theme_set(theme_minimal(12))
#First plot element of grid. Density plot.
p1<-  ggplot(aes(x=contb_receipt_amt),data=ContributionsNO)+
  geom_density(aes(color=cand_nm))+
  scale_x_log10(breaks=c(5,10,25,100,500,2500,10000))+
  xlab('Contribution Amt [$]') +
  ylab('Density') +
  ggtitle('Contribution Amt By Density')+
    theme(title=element_text(size=15),
        legend.text=element_text(size=10),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=10, size=10, vjust=0.7),
        axis.title=element_text(size=15))
#Show contribution frequency
ContributionsNO<-ContributionsNO %>% group_by(cand_nm)%>%
  mutate(FreqContr=n())

#First plot element of grid. Histogram.
p2<-ggplot(aes(x=reorder(cand_nm,-FreqContr),y=FreqContr),data=ContributionsNO)+
  geom_bar(stat='summary',fun.y=mean)+
  xlab('Candidate')+
  ylab('Number of Contributions')+
  ggtitle('Number of Contributions by Candidate')+
  theme(title=element_text(size=15),
        legend.text=element_text(size=10),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=10, size=10, vjust=0.7),
        axis.title=element_text(size=15))

grid.arrange(p2,p1)
```

### Description Two
Again we can see that while Jeb Bush is the weakest of the 'frontrunners'
in terms of the number of his donations, the contributions he does have are 
quite large. This differentiates him from the remaining candidates as the
distribution of their contributions are centered further to the left,
and more or less follow the same patterns.

### Plot Three
```{r echo=FALSE, message=FALSE, warning=FALSE, Plot_Three}
#Histogram of Contribution bucket frequency by candidate
ggplot(aes(x=contb_receipt_amt.Bucket,fill=cand_nm),data=ContributionsNO)+
         geom_histogram(color="black",position = 'dodge')+
  xlab('Contribution Amount[$]')+
  ylab('Frequency')+
  ggtitle('Contribution Frequency by Candidate')+
  theme(legend.text=element_text(size=15),
        legend.position="right",
        legend.title=element_blank(),
        axis.text.x=element_text(angle=40, size=10, vjust=0.7))
```

# Description Three
Ben carson has the most normalized distribution of Contributions made out to
him using log10 and buckets on the x axis. Jeb Bush's distribution is centered
further to the right at the $500-$1000 range, with a number of larger and smaller donations above and below this. The total frequency of his contributions seems
to be lower. Bernie sanders seeems to actually mimic ben Carson a lot in terms
of the frequency and scale of his distributions, however, it's easy to see why
Hillary has been so successful fund raising, as she is represented strongly
across all of the buckets.


# Reflection
The Contributions data set contains information on 14 presidential candidates
and all of their registered contributors in the State of North Carolina.

I started my Analysis by understanding the individual variables, and how their
levels were structured. I then processed the dataset using tidyr in order to
to fix an issue one of the candidates being split into two different levels.
I began plotting, by creating a set of histograms, all of which were
incrementally better than their preceding plots. These incremental fixes
included changing the binwidth, changing the x-axis from a continuous scale
to a logarithmic one, and then finnally using R's 'Cut' function to
group the contribution amounts into buckets. This last step was done because
i noticed that there were gaps between contribution amounts, that indicated 
a behaioral phenominon similar to achoring (ex: preference for round numbers).
After this i broke the contribution frequencies down by Occupation and Employer
and saw that retiree's and non working contributors made up by far the largest
segment of contributors.

Another step i took was to look at summmary statistics by candidate.
Jeb Bush stood out as an outlier in this regard, given that, despite receiving contributions the latest, and recieving the fewest number of contributions out 
of all the frontrunner candidates, the mean and median contributions
he did receive were far larger than those of his peers. 
Hillary Clinton was the strongest candidate in terms of total contributions,
though Ben Carson, a political outsider in many ways performed strongly. 
Ben Carson, who received the greatest number contributions, 
and ranked second in terms of the sum of contributions received, was interesting
given that this success seemed to be derived primarily via a large number of 
small donations. Looking at a breakdown of contributor occupation by candidate
confirms this trend, given that effectively half of the retirees who donated,
gave their money to Ben Carson. Retiree's are generally older and have less
disposable income, so it makes sense that they would be have more time to 
focus on political activity, though less money to actually send in a check.

I was unable to create a linear model to predict the Total Contributions for 
each candidate, as the data was too variable and unrepresentive of many key
drivers in campaigning. Maybe as things get later into the campaign it would
make more sense, but as right now i think it istoo early. One thing that
would make this task easier is to have access to the list of Major Super Pacs
working on behalf of these different candidates. Or even look at the amount
spent by each candidate. The added benefit of this last step would be that I 
would be able to include Republican front runner Donald Trump in this analysis.
This is currently impossible given that he is self financing his campaign, and 
thus would not be receiving contributions via the FEC.

In the final three plots we gained even more information. Before this was 
acheived,however, i was forced to exclude outlier(the weakest) candidates
from the dataset. This pruning process was done by looking at the weakest
candidates according to the Republican and Democratic average on the 
poll aggregation website real clear politics. In any case,
we found that in addition to performing well in terms of Total, Mean and Median contributions raised,Jeb Bush actually started raising funds the latest out
of all the  candidates. Conversely, Rand Paul, who started raising
funds the earliest,almost immediately saw his metrics average out to the
rest of the pack as soon as other candidates started entering the race.

In the density plot and Contribution histogram plots we saw complementary
information showing that   while Jeb Bush is the weakest of the 'frontrunners'
in terms of the number of his donations, the contributions he does have are 
significantly larger than his competitors large, a fact that differentiated him.

Finally in the dodged histogram, we saw that the
contributions for each candidate had different patterns and distributions.
Ben carson has the most normalized distribution of Contributions made out to
him using log10 and buckets on the x axis, while Jeb Bush received a huge almost
all of his contributions in the 1000 to 2750 dollar range(though he had a
small number of contributions that were larger and smaller than this). 
Hillary Clinton and Bernie Sanders, seemed to mimic Ben Carson's populist 
trend(large numbers of small donations), though Hillary was represented more
strongly in the larger valued buckets. For instance, she was effictively
equal to Bush in terms of the frequency of funds raised from the
1000 to 2750 dollar range, despite also being strongly represented in
contributions from small donors. Because of this last point, and because I am
inferring that this broad representation in contributions equats to a broad
representation among different contributor segments, I actually came away with
the conclsion that Hillary was the strongest candidate overall out of the ones
listed in this dataset. 
